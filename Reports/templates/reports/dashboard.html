<!-- reports/dashboard.html -->
{% extends 'reports/base_reports.html' %}

{% block page_title %}Dashboard Doanh thu{% endblock %}

{% block report_content %}
{% comment %} <!-- Form chọn thời gian -->
<div class="stat-card mb-4">
    <h5 class="mb-3">Chọn khoảng thời gian</h5>
    <form method="get" action="{% url 'revenue_report' %}" class="row g-3">
        <div class="col-md-4">
            <input type="date" class="form-control" name="start_date" 
                   value="{{ today|date:'Y-m-d' }}">
        </div>
        <div class="col-md-4">
            <input type="date" class="form-control" name="end_date"
                   value="{{ today|date:'Y-m-d' }}">
        </div>
        <div class="col-md-4">
            <button type="submit" class="btn btn-primary w-100">
                Xem báo cáo
            </button>
        </div>
    </form>
</div> {% endcomment %}

<!-- Form chọn thời gian -->
<div class="stat-card mb-4">
    <h5 class="mb-3">Chọn khoảng thời gian</h5>
    <form method="get" action="{% url 'revenue_report' %}" class="row g-3">
        <div class="col-md-4">
            <input type="date" class="form-control" name="start_date" 
                   value="{{ today|date:'Y-m-d' }}">
        </div>
        <div class="col-md-4">
            <input type="date" class="form-control" name="end_date"
                   value="{{ today|date:'Y-m-d' }}">
        </div>
        <div class="col-md-4">
            <button type="submit" class="btn btn-primary w-100">
                Xem báo cáo
            </button>
        </div>
    </form>
</div>

<!-- Thống kê -->
<div class="row mb-4">
    <div class="col-md-3 mb-3">
        <div class="stat-card text-center">
            <div class="text-primary mb-2" style="font-size: 2rem;">
                <i class="bi bi-cash"></i>
            </div>
            <h6>Doanh thu hôm nay</h6>
            <h4>{{ today_revenue|default:0|floatformat:0 }} ₫</h4>
        </div>
    </div>
    
    <div class="col-md-3 mb-3">
        <div class="stat-card text-center">
            <div class="text-success mb-2" style="font-size: 2rem;">
                <i class="bi bi-receipt"></i>
            </div>
            <h6>Bill hôm nay</h6>
            <h4>{{ today_bills|default:0 }}</h4>
        </div>
    </div>
    
    <div class="col-md-3 mb-3">
        <div class="stat-card text-center">
            <div class="text-info mb-2" style="font-size: 2rem;">
                <i class="bi bi-graph-up-arrow"></i>
            </div>
            <h6>Tổng doanh thu</h6>
            <h4>{{ total_revenue|default:0|floatformat:0 }} ₫</h4>
        </div>
    </div>
    
    <div class="col-md-3 mb-3">
        <div class="stat-card text-center">
            <div class="text-warning mb-2" style="font-size: 2rem;">
                <i class="bi bi-cart-check"></i>
            </div>
            <h6>Tổng bill</h6>
            <h4>{{ total_bills|default:0 }}</h4>
        </div>
    </div>
</div>

<!-- Nút xem chi tiết -->
<div class="text-center">
    <a href="{% url 'revenue_report' %}" class="btn btn-primary btn-lg">
        Xem báo cáo chi tiết
    </a>
</div>

{% if not today_revenue and not today_bills %}
<div class="stat-card mt-4 text-center">
    <p class="text-muted mb-0">Chưa có dữ liệu doanh thu và hóa đơn.</p>
</div>
{% endif %}
{% endblock %}